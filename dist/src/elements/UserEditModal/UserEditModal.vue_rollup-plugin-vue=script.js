import s from"../../../node_modules/vue-multiselect/dist/vue-multiselect.min.js";var e={name:"UserEditModal",props:{openModal:Boolean,onClose:Function,userToEdit:Object},data:()=>({user:{},password:"",passwordConfirm:"",passwordMatchError:!1,passwordLengthError:!1,groups:["Administrator","Editor","User"],selectedGroups:[],permissions:["Read","Write","Edit","Delete"],selectedPermissions:[],isOpen:!1}),watch:{openModal:function(s){if(s!==this.isOpen)if(s){if(this.selectedGroups.length=0,this.selectedPermissions.length=0,this.userToEdit){let s=Object.assign({},this.userToEdit),{groups:e,permissions:t,...i}=s;Object.assign(this.user,i),this.selectedGroups.push(...e),this.selectedPermissions.push(...t),console.debug("Adding groups",this.selectedGroups)}this.open()}else this.close()},password:function(s){this.checkPasswords()},passwordConfirm:function(s){this.checkPasswords()}},methods:{onCancelClick(){this.close()},onSaveClick(){console.debug("saving groups",this.selectedGroups),Object.assign(this.userToEdit,this.user),this.userToEdit.groups.length=0,this.userToEdit.permissions.length=0,this.userToEdit.groups.push(...this.selectedGroups),this.userToEdit.permissions.push(...this.selectedPermissions);let s;Object.assign({},this.userToEdit);s=this.user.id?new CustomEvent("user-edited.ft",{detail:{user:Object.assign({id:3},this.userToEdit)}}):new CustomEvent("user-created.ft",{detail:{user:Object.assign({id:3},this.userToEdit)}}),document.dispatchEvent(s),this.close()},addGroup(s){this.user.groups.push(s),this.groups.push(s)},addPermission(s){this.user.permissions.push(s),this.permissions.push(s)},checkPasswords(){this.$refs.password.classList.remove("error"),this.$refs.passwordConfirm.classList.remove("error"),this.passwordLengthError=!1,this.passwordMatchError=!1,this.password.length&&this.passwordConfirm.length&&(this.password.length<6&&(this.$refs.password.classList.add("error"),this.passwordLengthError=!0),this.passwordConfirm.length<6&&this.$refs.passwordConfirm.classList.add("error"),this.passwordConfirm!==this.password&&(this.$refs.passwordConfirm.classList.add("error"),this.passwordMatchError=!0))},open(){console.debug("Opening modal"),document.body.appendChild(this.$refs.modalWrapper),this.isOpen=!0},close(){this.$refs.modalTemplate.appendChild(this.$refs.modalWrapper),this.isOpen=!1,"function"==typeof this.onClose&&this.onClose()}},components:{Multiselect:s}};export default e;
